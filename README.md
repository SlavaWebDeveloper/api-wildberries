# Google Sheets и API WB для статистики кампаний

Этот проект предназначен для получения статистики кампаний из внешнего API Wildberries и обновления данных в Google Sheets. Скрипт выполняет регулярные запросы к API, обрабатывает полученные данные и обновляет таблицу в Google Sheets.

1. Получает данные о кампаниях WB из API.
2. Получает статистику по кампаниям за вчерашний день.
3. Обновляет данные в Google Sheets.

## Установка

1. **Клонируйте репозиторий:**

    ```bash
    git clone <URL вашего репозитория>
    cd <папка с репозиторием>
    ```

2. **Установите зависимости:**

    Убедитесь, что у вас установлен Node.js. Затем выполните:

    ```bash
    npm install
    ```

3. **Создайте файл `.env`:**

    Создайте файл `.env` в корневом каталоге проекта и добавьте следующие переменные окружения:

    ```env
    API_TOKEN=<ваш токен API>
    API_URL_COMPANIES=<URL API для кампаний>
    GOOGLE_SHEET_ID=<ID вашей Google таблицы>
    ```

4. **Получите учетные данные Google Sheets API:**

    Создайте проект в [Google Cloud Console](https://console.cloud.google.com/), включите Google Sheets API и создайте файл с учетными данными в формате JSON. Переименуйте его в `credentials.json` и поместите в корневую папку проекта.

## Использование

1. **Запустите скрипт:**

    Для запуска скрипта используйте следующую команду:

    ```bash
    node indexComp.js
    ```

2. **Что делает скрипт:**

    - Запрашивает данные о кампаниях из внешнего API Wildberries.
    - Получает статистику по этим кампаниям за предыдущий день.
    - Обновляет данные в указанной Google таблице, используя полученную статистику.
    - Запускает процесс обновления данных с помощью `node-cron`.

## Файлы

- `credentials.json`: Файл с учетными данными для доступа к Google Sheets API.
- `.env`: Файл с переменными окружения, необходимыми для работы скрипта.
- `indexComp.js`: Основной скрипт, выполняющий обработку данных и обновление таблицы.

## Ошибки и отладка

- Если в процессе выполнения скрипта возникают ошибки, они будут выведены в консоль.
- Превышение лимита запросов API будет автоматически обработано с повторной попыткой через 70 секунд.
